<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Remove People from Photos Online | Free AI Person Removal Tool</title>
    <meta name="description" content="Remove people from photos online for free. Paint over unwanted people and let AI seamlessly remove them. No registration, no watermark." />
    <meta name="keywords" content="remove people from photos, remove people from pictures, delete person from photo, remove unwanted people, AI person removal, remove person from image" />
    <meta name="robots" content="index, follow" />
    <link rel="canonical" href="https://www.changeimageto.com/remove-people-from-photo.html" />

    <meta property="og:title" content="Remove People from Photos Online" />
    <meta property="og:description" content="AI-powered person removal tool. Paint over people to remove them seamlessly." />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://www.changeimageto.com/remove-people-from-photo.html" />
    <meta property="og:image" content="https://www.changeimageto.com/logo.png" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Remove People from Photos Online" />
    <meta name="twitter:description" content="AI-powered person removal tool. Paint over people to remove them seamlessly." />
    <meta name="twitter:image" content="https://www.changeimageto.com/logo.png" />

    <link rel="stylesheet" href="./styles.css?v=20250916-3" />
    <style>
      .painting-interface {
        display: none;
        margin-top: 20px;
      }
      
      .toolbar {
        display: flex;
        gap: 10px;
        margin-bottom: 15px;
        justify-content: center;
        flex-wrap: wrap;
      }
      
      .toolbar button {
        padding: 8px 16px;
        border: 2px solid #007bff;
        background: white;
        color: #007bff;
        border-radius: 6px;
        cursor: pointer;
        font-size: 14px;
        transition: all 0.2s;
      }
      
      .toolbar button:hover, .toolbar button.active {
        background: #007bff;
        color: white;
      }
      
      .toolbar button.eraser {
        border-color: #dc3545;
        color: #dc3545;
      }
      
      .toolbar button.eraser:hover, .toolbar button.eraser.active {
        background: #dc3545;
        color: white;
      }
      
      .canvas-container {
        position: relative;
        display: inline-block;
        border: 2px solid #ddd;
        border-radius: 8px;
        overflow: hidden;
        max-width: 100%;
        background: #f8f9fa;
      }
      
      #image-canvas {
        display: block;
        max-width: 100%;
        height: auto;
        cursor: crosshair;
      }
      
      #mask-canvas {
        position: absolute;
        top: 0;
        left: 0;
        display: block;
        max-width: 100%;
        height: auto;
        cursor: crosshair;
        pointer-events: auto;
        z-index: 10;
      }
      
      .brush-info {
        text-align: center;
        margin: 10px 0;
        color: #666;
        font-size: 14px;
      }
      
      .instructions {
        background: #e7f3ff;
        border: 1px solid #b3d9ff;
        border-radius: 6px;
        padding: 15px;
        margin: 20px 0;
        text-align: center;
      }
      
      .instructions h3 {
        margin: 0 0 10px 0;
        color: #0066cc;
      }
      
      .instructions p {
        margin: 5px 0;
        color: #333;
      }
      
      .result-section {
        display: none;
        margin-top: 20px;
      }
      
      .comparison {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        margin: 20px 0;
      }
      
      .comparison-item {
        text-align: center;
      }
      
      .comparison-item h4 {
        margin: 10px 0 5px 0;
        color: #333;
      }
      
      .comparison-item img {
        max-width: 100%;
        height: auto;
        border: 1px solid #ddd;
        border-radius: 4px;
      }
      
      @media (max-width: 768px) {
        .comparison {
          grid-template-columns: 1fr;
        }
        
        .toolbar {
          justify-content: center;
        }
        
        .toolbar button {
          padding: 6px 12px;
          font-size: 12px;
        }
      }
      /* Comprehensive Footer Styles */
      .comprehensive-footer{background:var(--card);border-top:1px solid var(--border);margin-top:60px;padding:48px 0 24px}
      .footer-grid{display:grid;grid-template-columns:2fr 1fr 1fr 1fr 1fr;gap:40px;margin-bottom:40px}
      .footer-brand{max-width:300px}
      .footer-description{color:var(--muted);line-height:1.6;margin-bottom:24px;font-size:14px}
      .footer-social{display:flex;gap:12px}
      .social-link{display:flex;align-items:center;justify-content:center;width:40px;height:40px;background:var(--border);border-radius:8px;color:var(--muted);transition:all 0.2s ease;text-decoration:none}
      .social-link:hover{background:var(--accent);color:#001633;transform:translateY(-2px)}
      .footer-section h3{color:var(--fg);font-size:16px;font-weight:600;margin:0 0 20px}
      .footer-links{list-style:none;padding:0;margin:0}
      .footer-links li{margin-bottom:12px}
      .footer-links a{color:var(--muted);text-decoration:none;font-size:14px;transition:color 0.2s ease}
      .footer-links a:hover{color:var(--accent)}
      .footer-bottom{border-top:1px solid var(--border);padding-top:24px}
      .footer-bottom-content{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:16px}
      .footer-copyright{color:var(--muted);font-size:14px;margin:0}
      .footer-bottom-links{display:flex;gap:24px}
      .footer-bottom-links a{color:var(--muted);text-decoration:none;font-size:14px;transition:color 0.2s ease}
      .footer-bottom-links a:hover{color:var(--accent)}
      @media(max-width:1024px){.footer-grid{grid-template-columns:1fr 1fr 1fr;gap:32px}}
      @media(max-width:768px){.footer-grid{grid-template-columns:1fr 1fr;gap:24px}.comprehensive-footer{padding:32px 0 20px}.footer-bottom-content{flex-direction:column;text-align:center;gap:12px}.footer-bottom-links{justify-content:center}}
      @media(max-width:480px){.footer-grid{grid-template-columns:1fr;gap:20px}}
    
    </style>
  </head>
  <body>
    <header class="container header">
      <a href="/" class="logo-link"><img src="./logo.png?v=20250916-2" alt="ChangeImageTo" class="logo-img" /></a>
      <div style="display:flex;align-items:center;gap:16px;justify-content:space-between;width:100%">
        <h1 style="margin:0">Remove People from Photos Online - Free AI Tool</h1>
        <nav class="top-nav"><a href="/blog" aria-label="Read our blog">Blog</a></nav>
      </div>
      <p>Remove people from photos online for free using our AI-powered tool. Simply paint over unwanted people and let AI seamlessly remove them. No registration required, no watermark added.</p>
    </header>

    <main class="container main">
      <!-- Upload Section -->
      <div class="upload-section">
        <form id="upload-form">
          <div class="uploader" id="dropzone">
            <input type="file" id="file-input" accept="image/*" />
            <div class="uploader-instructions">
              <strong>Drop image here</strong>
              <span>or click to browse</span>
            </div>
          </div>
        </form>
      </div>

      <!-- Instructions -->
      <div class="instructions" id="instructions" style="display: none;">
        <h3>How to Remove People from Photos</h3>
        <p><strong>Step 1:</strong> Upload your photo above</p>
        <p><strong>Step 2:</strong> Paint over the people you want to remove (red overlay)</p>
        <p><strong>Step 3:</strong> Click "Remove Painted Areas" to process</p>
        <p><strong>Step 4:</strong> Download your result</p>
      </div>

      <!-- Painting Interface -->
      <div class="painting-interface" id="painting-interface">
        <div class="toolbar">
          <button id="brush-small" onclick="setBrushSize(10)">Small Brush</button>
          <button id="brush-medium" onclick="setBrushSize(20)" class="active">Medium Brush</button>
          <button id="brush-large" onclick="setBrushSize(40)">Large Brush</button>
          <button id="eraser-btn" onclick="toggleEraser()" class="eraser">Eraser</button>
          <button onclick="clearMask()">Clear All</button>
        </div>
        
        <div class="brush-info" id="brush-info">
          Medium Brush (20px) - Paint over people to remove them
        </div>
        
        <div class="canvas-container" id="canvas-container">
          <canvas id="image-canvas"></canvas>
          <canvas id="mask-canvas"></canvas>
        </div>
        
        <div style="text-align: center; margin-top: 15px;">
          <button id="process-btn" class="process-btn" onclick="removePaintedAreas()">
            Remove Painted Areas
          </button>
        </div>
      </div>

      <!-- Result Section -->
      <div class="result-section" id="result-section">
        <h3 style="text-align: center; margin-bottom: 20px;">Processing Complete!</h3>
        
        <div class="comparison">
          <div class="comparison-item">
            <h4>Original</h4>
            <img id="original-result-img" src="" alt="Original image" />
          </div>
          <div class="comparison-item">
            <h4>Result</h4>
            <img id="result-img" src="" alt="Processed image" />
            <div style="text-align: center; margin-top: 15px;">
              <a id="download-link" class="download-btn" download="">Download Result</a>
            </div>
          </div>
        </div>
        
        <div style="text-align: center; margin-top: 20px;">
          <button class="reset-btn" onclick="resetInterface()">Remove More People</button>
        </div>
      </div>
    </main>

    <!-- Features Section -->
    <section class="container features-section" style="margin-top: 40px; padding: 40px 0;">
      <h2>Why Choose Our Person Removal Tool?</h2>
      <div class="features-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-top: 20px;">
        <div class="feature-item">
          <h3>Paint & Remove</h3>
          <p>Simply paint over unwanted people with our intuitive brush tool. No complex selections or AI guessing required.</p>
        </div>
        <div class="feature-item">
          <h3>AI-Powered Inpainting</h3>
          <p>Advanced AI seamlessly fills in the background where people were removed, creating natural-looking results.</p>
        </div>
        <div class="feature-item">
          <h3>Multiple Brush Sizes</h3>
          <p>Choose from small, medium, or large brushes for precise control. Eraser tool for corrections.</p>
        </div>
        <div class="feature-item">
          <h3>Free & Instant</h3>
          <p>No registration required, no watermarks added. Process your photos instantly and download immediately.</p>
        </div>
      </div>
    </section>

    <!-- FAQ Section -->
    <section class="container faq-section" style="margin-top: 40px; padding: 40px 0;">
      <h2>Frequently Asked Questions</h2>
      <div class="faq-list" style="margin-top: 20px;">
        <div class="faq-item" style="margin-bottom: 20px;">
          <h3>How do I remove people from photos?</h3>
          <p>Upload your photo, paint over the people you want to remove using the brush tool, then click "Remove Painted Areas". Our AI will seamlessly remove them and fill in the background.</p>
        </div>
        <div class="faq-item" style="margin-bottom: 20px;">
          <h3>Can I remove multiple people from one photo?</h3>
          <p>Yes! You can paint over multiple people in the same photo. Just use the brush tool to mark all the people you want to remove, then process the image once.</p>
        </div>
        <div class="faq-item" style="margin-bottom: 20px;">
          <h3>What if I make a mistake while painting?</h3>
          <p>Use the eraser tool to remove any accidental brush strokes, or click "Clear All" to start over. You can adjust your selection as many times as needed.</p>
        </div>
        <div class="faq-item" style="margin-bottom: 20px;">
          <h3>Is the person removal tool free to use?</h3>
          <p>Absolutely! Our person removal tool is completely free to use. No registration, no watermarks, and no hidden fees.</p>
        </div>
      </div>
    </section>

    <nav class="seo-links">
      <a href="/remove-background-from-image.html">Remove Background from Image</a>
      <a href="/enhance-image.html">Enhance Image</a>
      <a href="/upscale-image.html">AI Image Upscaler</a>
      <a href="/remove-text-from-image.html">Remove Text from Image</a>
      <a href="/remove-people-from-photo.html">Remove People from Photos</a>
      <a href="/change-color-of-image.html">Change color of image online</a>
      <a href="/change-image-background.html">Change image background</a>
      <a href="/convert-image-format.html">Convert image format</a>
      <a href="/upscale-image.html">AI Image Upscaler</a>
      <a href="/blur-background.html">Blur Background</a>
      <a href="/enhance-image.html">Enhance Image</a>
    </nav>

    <footer class="comprehensive-footer">
      <div class="container">
        <div class="footer-grid">
          <!-- Brand Section -->
          <div class="footer-brand">
            <div class="footer-logo">
              <img src="/logo.png?v=20250921-1" alt="ChangeImageTo" style="height: 32px; margin-bottom: 16px;">
            </div>
            <p class="footer-description">
              The leading platform for free online image editing. Remove backgrounds, change colors, resize images, and enhance photos instantly with AI-powered tools.
            </p>
          </div>

          <!-- Tools Section -->
          <div class="footer-section">
            <h3 class="footer-heading">Image Tools</h3>
            <ul class="footer-links">
              <li><a href="/remove-background-from-image.html">Remove Background</a></li>
              <li><a href="/change-image-background.html">Change Background</a></li>
              <li><a href="/change-color-of-image.html">Change Image Colors</a></li>
              <li><a href="/upscale-image.html">Upscale Image</a></li>
              <li><a href="/enhance-image.html">Enhance Image</a></li>
              <li><a href="/blur-background.html">Blur Background</a></li>
            </ul>
          </div>

          <!-- Blog Section -->
          <div class="footer-section">
            <h3 class="footer-heading">Latest Blog Posts</h3>
            <ul class="footer-links">
              <li><a href="/blog/remove-background-from-image.html">Remove Background from Image</a></li>
              <li><a href="/blog/upscale-image.html">Upscale Image Quality</a></li>
              <li><a href="/blog/change-image-background-color.html">Change Image Background Color</a></li>
              <li><a href="/blog/remove-background-from-image-photoshop.html">Remove Background in Photoshop</a></li>
              <li><a href="/blog/change-image-background-color-online.html">Change Background Color Online</a></li>
              <li><a href="/blog/remove-background-from-image-canva.html">Remove Background in Canva</a></li>
              <li><a href="/blog/change-image-background-color-photoshop.html">Change Background in Photoshop</a></li>
              <li><a href="/blog/remove-background-from-image-android.html">Remove Background on Android</a></li>
            </ul>
          </div>

          <!-- Resources Section -->
          <div class="footer-section">
            <h3 class="footer-heading">Resources</h3>
            <ul class="footer-links">
              <li><a href="/blog">Blog</a></li>
              <li><a href="/blog/remove-background-from-image.html">Remove Background Guide</a></li>
              <li><a href="/blog/change-image-background-color.html">Background Color Guide</a></li>
              <li><a href="/blog/upscale-image.html">Image Upscaling Guide</a></li>
              <li><a href="/image-quality-checker.html">Quality Checker</a></li>
              <li><a href="/convert-image-format.html">Format Converter</a></li>
            </ul>
          </div>

          <!-- Company Section -->
          <div class="footer-section">
            <h3 class="footer-heading">Company</h3>
            <ul class="footer-links">
              <li><a href="/privacy-policy.html">Privacy Policy</a></li>
              <li><a href="/contact.html">Contact Us</a></li>
              <li><a href="/about.html">About</a></li>
            </ul>
          </div>
        </div>

        <!-- Bottom Bar -->
        <div class="footer-bottom">
          <div class="footer-bottom-content">
            <p class="footer-copyright">
              © 2024 ChangeImageTo.com. All rights reserved. Built for speed and quality.
            </p>
          </div>
        </div>
      </div>
    </footer>

    <script src="./script.js?v=20250916-3" defer></script>
    <script>
      // Brush-based person removal functionality
      class BrushTool {
        constructor() {
          this.isPainting = false;
          this.brushSize = 20;
          this.isErasing = false;
          this.imageCanvas = document.getElementById('image-canvas');
          this.maskCanvas = document.getElementById('mask-canvas');
          this.ctx = this.maskCanvas.getContext('2d');
          this.currentFile = null;
          
          this.setupEventListeners();
        }
        
        setupEventListeners() {
          // Mouse events
          this.maskCanvas.addEventListener('mousedown', this.startPainting.bind(this));
          this.maskCanvas.addEventListener('mousemove', this.paint.bind(this));
          this.maskCanvas.addEventListener('mouseup', this.stopPainting.bind(this));
          this.maskCanvas.addEventListener('mouseleave', this.stopPainting.bind(this));
          
          // Touch events for mobile
          this.maskCanvas.addEventListener('touchstart', this.handleTouch.bind(this));
          this.maskCanvas.addEventListener('touchmove', this.handleTouch.bind(this));
          this.maskCanvas.addEventListener('touchend', this.stopPainting.bind(this));
        }
        
        handleTouch(e) {
          e.preventDefault();
          const touch = e.touches[0];
          const mouseEvent = new MouseEvent(e.type === 'touchstart' ? 'mousedown' : 'mousemove', {
            clientX: touch.clientX,
            clientY: touch.clientY
          });
          
          if (e.type === 'touchstart') {
            this.startPainting(mouseEvent);
          } else {
            this.paint(mouseEvent);
          }
        }
        
        startPainting(e) {
          this.isPainting = true;
          this.paint(e);
        }
        
        paint(e) {
          if (!this.isPainting) return;
          
          const rect = this.maskCanvas.getBoundingClientRect();
          const scaleX = this.maskCanvas.width / rect.width;
          const scaleY = this.maskCanvas.height / rect.height;
          
          const x = (e.clientX - rect.left) * scaleX;
          const y = (e.clientY - rect.top) * scaleY;
          
          if (this.isErasing) {
            // Eraser mode
            this.ctx.globalCompositeOperation = 'destination-out';
          } else {
            // Paint mode
            this.ctx.globalCompositeOperation = 'source-over';
            this.ctx.fillStyle = 'rgba(255, 0, 0, 0.8)'; // More opaque red overlay
          }
          
          this.ctx.beginPath();
          this.ctx.arc(x, y, this.brushSize, 0, Math.PI * 2);
          this.ctx.fill();
          
          console.log('Painting at:', { x, y, brushSize: this.brushSize, isErasing: this.isErasing });
        }
        
        stopPainting() {
          this.isPainting = false;
        }
        
        setBrushSize(size) {
          this.brushSize = size;
          
          // Update active button
          document.querySelectorAll('.toolbar button').forEach(btn => {
            btn.classList.remove('active');
          });
          
          if (size === 10) document.getElementById('brush-small').classList.add('active');
          else if (size === 20) document.getElementById('brush-medium').classList.add('active');
          else if (size === 40) document.getElementById('brush-large').classList.add('active');
          
          // Update brush info
          const brushInfo = document.getElementById('brush-info');
          if (this.isErasing) {
            brushInfo.textContent = `Eraser (${size}px) - Click and drag to erase`;
          } else {
            brushInfo.textContent = `${size <= 15 ? 'Small' : size <= 25 ? 'Medium' : 'Large'} Brush (${size}px) - Paint over people to remove them`;
          }
        }
        
        toggleEraser() {
          this.isErasing = !this.isErasing;
          
          const eraserBtn = document.getElementById('eraser-btn');
          const brushInfo = document.getElementById('brush-info');
          
          if (this.isErasing) {
            eraserBtn.classList.add('active');
            brushInfo.textContent = `Eraser (${this.brushSize}px) - Click and drag to erase`;
            this.maskCanvas.style.cursor = 'crosshair';
          } else {
            eraserBtn.classList.remove('active');
            brushInfo.textContent = `${this.brushSize <= 15 ? 'Small' : this.brushSize <= 25 ? 'Medium' : 'Large'} Brush (${this.brushSize}px) - Paint over people to remove them`;
            this.maskCanvas.style.cursor = 'crosshair';
          }
        }
        
        clearMask() {
          this.ctx.clearRect(0, 0, this.maskCanvas.width, this.maskCanvas.height);
        }
        
        getMaskData() {
          const maskData = this.maskCanvas.toDataURL('image/png');
          console.log('Mask data length:', maskData.length);
          
          // Check if mask has any content
          const ctx = this.maskCanvas.getContext('2d');
          const imageData = ctx.getImageData(0, 0, this.maskCanvas.width, this.maskCanvas.height);
          const data = imageData.data;
          let hasContent = false;
          
          for (let i = 0; i < data.length; i += 4) {
            if (data[i] > 0 || data[i + 1] > 0 || data[i + 2] > 0) { // Check RGB channels
              hasContent = true;
              break;
            }
          }
          
          console.log('Mask has content:', hasContent);
          return maskData;
        }
        
        loadImage(file) {
          this.currentFile = file;
          const reader = new FileReader();
          
          reader.onload = (e) => {
            const img = new Image();
            img.onload = () => {
              // Set canvas dimensions
              const maxWidth = 800;
              const maxHeight = 600;
              
              let { width, height } = img;
              if (width > maxWidth || height > maxHeight) {
                const ratio = Math.min(maxWidth / width, maxHeight / height);
                width *= ratio;
                height *= ratio;
              }
              
              // Set canvas internal dimensions
              this.imageCanvas.width = width;
              this.imageCanvas.height = height;
              this.maskCanvas.width = width;
              this.maskCanvas.height = height;
              
              // Set canvas display dimensions (CSS)
              this.imageCanvas.style.width = width + 'px';
              this.imageCanvas.style.height = height + 'px';
              this.maskCanvas.style.width = width + 'px';
              this.maskCanvas.style.height = height + 'px';
              
              // Draw image
              const imgCtx = this.imageCanvas.getContext('2d');
              imgCtx.drawImage(img, 0, 0, width, height);
              
              // Clear mask and set up canvas
              this.clearMask();
              
              // Set up canvas context for painting
              this.ctx.globalCompositeOperation = 'source-over';
              this.ctx.fillStyle = 'rgba(255, 0, 0, 0.8)';
              this.ctx.lineCap = 'round';
              this.ctx.lineJoin = 'round';
              
              // Show painting interface
              document.getElementById('painting-interface').style.display = 'block';
              document.getElementById('instructions').style.display = 'block';
              
              console.log('Canvas setup complete:', { 
                width, 
                height, 
                imageCanvas: { width: this.imageCanvas.width, height: this.imageCanvas.height },
                maskCanvas: { width: this.maskCanvas.width, height: this.maskCanvas.height }
              });
            };
            img.src = e.target.result;
          };
          
          reader.readAsDataURL(file);
        }
      }
      
      // Initialize brush tool
      const brushTool = new BrushTool();
      
      // Global functions for buttons
      function setBrushSize(size) {
        brushTool.setBrushSize(size);
      }
      
      function toggleEraser() {
        brushTool.toggleEraser();
      }
      
      function clearMask() {
        brushTool.clearMask();
      }
      
      async function removePaintedAreas() {
        if (!brushTool.currentFile) return;
        
        const processBtn = document.getElementById('process-btn');
        const originalText = processBtn.textContent;
        processBtn.textContent = 'Processing...';
        processBtn.disabled = true;
        
        try {
          const maskData = brushTool.getMaskData();
          console.log('Sending mask data:', maskData.substring(0, 100) + '...');
          
          const formData = new FormData();
          formData.append('file', brushTool.currentFile);
          formData.append('mask_data', maskData);
          
          console.log('FormData entries:');
          for (let [key, value] of formData.entries()) {
            console.log(key, typeof value, value.length || value.size);
          }
          
          const response = await fetch('/api/remove-painted-areas', {
            method: 'POST',
            body: formData
          });
          
          if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
          }
          
          const blob = await response.blob();
          const resultUrl = URL.createObjectURL(blob);
          
          // Show result
          document.getElementById('result-img').src = resultUrl;
          document.getElementById('original-result-img').src = brushTool.imageCanvas.toDataURL();
          
          // Set download link
          const downloadLink = document.getElementById('download-link');
          downloadLink.href = resultUrl;
          downloadLink.download = `people-removed-${Date.now()}.png`;
          
          // Show result section
          document.getElementById('result-section').style.display = 'block';
          
          // Scroll to result
          document.getElementById('result-section').scrollIntoView({ behavior: 'smooth' });
          
        } catch (error) {
          alert('Error processing image: ' + error.message);
        } finally {
          processBtn.textContent = originalText;
          processBtn.disabled = false;
        }
      }
      
      function resetInterface() {
        const resultSection = document.getElementById('result-section');
        resultSection.style.display = 'none';
        try {
          // If a result exists, load it back into the canvas so user can remove more
          const resultImgEl = document.getElementById('result-img');
          const href = document.getElementById('download-link')?.href || resultImgEl?.src;
          if (href) {
            fetch(href).then(r=>r.blob()).then(b=>{
              const f = new File([b], `people-removed-${Date.now()}.png`, { type: b.type || 'image/png' });
              brushTool.loadImage(f);
            }).catch(()=>{ brushTool.clearMask(); });
          } else {
            brushTool.clearMask();
          }
        } catch(_) {
          brushTool.clearMask();
        }
      }
      
      // File upload handling
      document.addEventListener('DOMContentLoaded', function() {
        const fileInput = document.getElementById('file-input');
        const dropzone = document.getElementById('dropzone');
        
        function handleFile(file) {
          if (file && file.type.startsWith('image/')) {
            brushTool.loadImage(file);
          }
        }
        
        fileInput.addEventListener('change', (e) => {
          handleFile(e.target.files[0]);
        });
        
        dropzone.addEventListener('dragover', (e) => {
          e.preventDefault();
          dropzone.classList.add('dragover');
        });
        
        dropzone.addEventListener('dragleave', () => {
          dropzone.classList.remove('dragover');
        });
        
        dropzone.addEventListener('drop', (e) => {
          e.preventDefault();
          dropzone.classList.remove('dragover');
          handleFile(e.dataTransfer.files[0]);
        });
        
        dropzone.addEventListener('click', () => {
          fileInput.click();
        });
      });
    </script>
  </body>
</html>
